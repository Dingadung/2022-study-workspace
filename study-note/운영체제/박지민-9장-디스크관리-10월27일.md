박지민-9장-디스크관리-10월27일
>디스크 : 컴퓨터 시스템의 대표적인 2차 저장장치

## 1. 디스크의 구조
#### logical block(논리블록)
- 디스크를 일정한 크기의 저장공간들

- 디스크에 데이터가 저장될 때에는 logical block 단위로 저장되고 디스크 외부로 I/O가 일어날 때에도 logical block 단위로 전송된다.
#### sector(섹터)
- logical block이 저장되는 디스크 내의 물리적인 위치

> logical block : sector = 1 : 1로 저장
#### track(트랙)
- 디스크의 물리적 구조는 원판으로 구성되는데 이 각각의 원판

- 각 track은 sector로 나뉘며, sector에 최소한의 단위 정보가 저장된다.
#### cylinder(실린더)
- 여러 개의 원판에서 상대적 위치가 동일한 트랙들의 집합

> 디스크에 데이터를 읽고 쓰기 위해서는 arm(암)이 해당 섹터가 위치한 cylinder로 이동한 후 원판이 회정하여 디스크 헤드가 저장된 sector 위치에 도달해야 한다.
## 2. 디스크 스케줄링
#### access time 
- 디스크 헤드를 해당 실린더 위치로 이동시키는 데 걸리는 시간
#### rotational latency 
- 디스크가 회전해서 읽고 쓰려는 섹터가 헤드 위치에 도달하기까지 걸리는 시간
#### transfer time
- 해당 섹터가 헤드 위치에 도달한 후 데이터를 실제로 섹터에 읽고 쓰는 데 소요되는 시간
### Disk scheduling
- 효율적인 디스크 I/O를 위해 여러 섹터들에 대한 입추력 요청이 들어왔을 때 이들을 어떠한 순서로 처리할 것인지 결정하는 매커니즘
- 디스크 헤드의 이동거리를 줄이는 것이 디스크 스케줄링의 가장 중요한 목표
#### 1) FCFS(First Come First Served) scheduling
- 디스크에 먼저 들어온 요청을 먼저 처리하는 방식

- 효율성 떨어짐
- 탐색시간이 비효율적으로 늘어나는 결과를 초래함


#### 2) SSTF(Shorest Seek Time First) scheduling
- 헤드의 현재 위치로부터 가장 가까운 위치에 있는 요청을 제일 먼저 처리하는 방식

- starvation을 발생시킬 수 있음


#### 3) SCAN algorithm
- 헤드가 디스크 원판의 안쪽 끝과 바깥쪽 끝을 오가며, 그 경로에 존재하는 모든 요청을 처리함

- elevator scheduling algorithm이라고도 부름
- 효율성과 형평성을 모두 만족하는 알고리즘
- 제일 안쪽이나 바깥쪽의 위치가 가운데 위치가 기다리는 평균시간이 더 짧은 문제 발생

#### 4) C-SCAN algorithm
- SCAN과 유사하나 헤드가 다른 쪽 끝에 도달해 방향을 바꾼 후에는 요청을 처리하지 않고 곧바로 출발점으로 다시 이동만 함

- SCAN보다 좀 더 균일한 탐색시간을 제공

#### 5) LOOK & C-LOOK algorithm
- LOOK : 헤드가 한쪽 방향으로 이동하다가 그 방향에 더 이상 대기 중인 요청이 없으면 헤드의 방향을 즉시 반대로 바꾸는 스케줄링 방식

- C-LOOK : LOOK과 유사하며 한쪽 방향으로 이동할 때에만 요청을 처리하는 점에서 C-SCAN과 유사함

## 3. 다중 디스크 환경에서의 스케줄링
- 다중 디스크 환경에서의 스케줄링 

    - 많은 요청을 동시에 처리할 수 있는 확장성 있는 서비스가 목표
- 디스크 간의 load balancing(부하균형)을 이루도록 스케줄링하는 것이 중요함
- 모든 디스크에 요청을 골고루 분산시키기보다는 

    - 일부 디스크에 요청을 집중시키고 나머지 디스크는 회전을 정지시키는 것이 효과적
- 사용자가 적을 경우 일부 기기에 부하를 집중시켜 잔여 기기들을 휴면 상태에 이를 수 있게 하는 부하편향 기법을 고려할 필요가 있음
## 4. 디스크의 저전력 관리
### 1) 비활성화 기법
디스크의 상태는 전력 소모를 기준으로 네 가지 상태로 나눌 수 있다.

#### active(활성) 상태
- 현재 헤드가 데이터를 읽거나 쓰고 있는 상태

#### idle(공회전) 상태
- 디스크가 회전 중이지만 데이터를 읽거나 쓰지는 않는 상태

#### standby(준비) 상태
- 디스크가 회전하지 않지만 인터페이스가 활성화된 상태

#### sleep(휴면) 상태
- 디스크가 회전하지 않고 인터페이스도 비활성화된 상태

> - 후속 요청까지의 시간 간격이 break even time 이상일 경우에만 디스크 회전을 정지시키는 것이 전력 소모를 절감하는데 효과적
- 장치의 비활성화할 시점을 결정하기 위해 미래의 요청이 도착하는 시점과 간격을 정확히 예측하는 것이 중요함을 뜻함
#### - timeout based(시간기반 기법)
- 일정 시간 동안 디스크가 공회전 상태이면 장치를 정지시켰다가 다시 요청이 들어왔을 때 디스크를 활성화함

#### - prediction based(예측기반 기법)
- 과거 요청을 관찰하여 다음 공회전 구간의 길이를 예측한 후 디스크를 비활성화 할 시점을 결정함

#### - stochastic based(확률기반 기법)
- 디바이스의 상태변경 시간 간격을 구하기 위해 확률분포를 통해 요청을 모델링하고 Markov chain 등과 같은 통계적 모델을 이용함.

### 2) 회전속도 조절 기법
- Rotations Per Minute:RPM(디스크의 회전 속도)을 가변적으로 조절하는 기법

### 3) 디스크의 데이터 배치 기법
- 디스크 내에 데이터의 replica를 많이 만들어 헤드 위치에서 가까운 복제본에 접근하도록 함으로써 빠르응답시간과 전력 소 모량 절감을 얻는 FS2(free space) file system 기법

### 4) 버퍼캐싱 및 사전인출 기법
- 미래에 요청될 데이터를 미리 알거나 어느 정도 예측할 수 있다면?

    - 디스크가 활성 상태일 때 헤드 위치로부터 가까운 데이터를 사전인출 함으로써 향후 디스크의 비활성화 가능성을 높여 전력 소모를 줄일 수 있는 기법

### 5) 쓰기전략을 통한 저전력 디스크 기법
- write strategy(쓰기전략)를 통해 전력 소모를 줄이는 기법